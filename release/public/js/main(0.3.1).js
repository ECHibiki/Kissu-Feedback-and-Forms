!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FormLibrary",[],t):"object"==typeof exports?exports.FormLibrary=t():e.FormLibrary=t()}(self,(()=>(()=>{"use strict";var e={};return(()=>{var t,a=e;function n(e,t){if(console.log(e,t),!e)return;let a=e.Respondables;console.log("RES",a),a&&a.forEach((e=>{console.log(e);let a=o(t),n="";switch(e.Type){case"textarea":n=m(a.base_id,a.respondable_container_id,a.container),document.getElementById(n+"-name").value=e.Object.Field.Name,document.getElementById(n+"-label").value=e.Object.Field.Label,document.getElementById(n+"-required").checked=e.Object.Field.Required,document.getElementById(n+"-placeholder").value=e.Object.Placeholder;break;case"genericinput":n=p(a.base_id,a.respondable_container_id,a.container),document.getElementById(n+"-name").value=e.Object.Field.Name,document.getElementById(n+"-label").value=e.Object.Field.Label,document.getElementById(n+"-required").checked=e.Object.Field.Required,document.getElementById(n+"-placeholder").value=e.Object.Placeholder,document.getElementById(n+"-type").value=e.Object.Type;break;case"fileinput":n=g(a.base_id,a.respondable_container_id,a.container),document.getElementById(n+"-name").value=e.Object.Field.Name,document.getElementById(n+"-label").value=e.Object.Field.Label,document.getElementById(n+"-required").checked=e.Object.Field.Required,document.getElementById(n+"-allowed-ext").value=e.Object.AllowedExtRegex,document.getElementById(n+"-max-size").value=e.Object.MaxSize;break;case"selectiongroup":n=b(a.base_id,a.respondable_container_id,a.container),document.getElementById(n+"-name").value=e.Object.Field.Name,document.getElementById(n+"-label").value=e.Object.Field.Label,document.getElementById(n+"-required").checked=e.Object.Field.Required;for(let t=1;t<e.Object.CheckableItems.length;t++)f(document.getElementById(n),"checkable");e.Object.CheckableItems.forEach(((e,t)=>{document.getElementById(n+"-checkable-label-"+t).value=e.Label,document.getElementById(n+"-checkable-value-"+t).value=e.Value}));break;case"optiongroup":n=I(a.base_id,a.respondable_container_id,a.container),document.getElementById(n+"-name").value=e.Object.Field.Name,document.getElementById(n+"-label").value=e.Object.Field.Label,document.getElementById(n+"-required").checked=e.Object.Field.Required;for(let t=1;t<e.Object.Options.length;t++)f(document.getElementById(n),"option");e.Object.Options.forEach(((e,t)=>{document.getElementById(n+"-option-label-"+t).value=e.Label,document.getElementById(n+"-option-value-"+t).value=e.Value}))}})),r(!0);let d=e.SubGroups;console.log("GS",d),d&&d.forEach((e=>{let a=l(t);document.getElementById(a+"-label").value=e.Label,document.getElementById(a+"-id").value=e.ID,document.getElementById(a+"-description").value=e.Description,n(e,document.getElementById(a))}))}function r(e){let t=Array.from(document.getElementsByTagName("BUTTON")),a=Array.from(document.getElementsByTagName("INPUT")),n=Array.from(document.getElementsByTagName("SELECT")),r=[].concat(t,a,n);for(let t=0;t<r.length;t++)e?r[t].setAttribute("disabled",""+e):r[t].removeAttribute("disabled")}function l(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-group");console.log(t,a,e);let n="group"+(Date.now()+Math.random()),r=document.createElement("DIV");r.setAttribute("style",""),r.className="sub-group form-group",r.id=n+"-group",r.innerHTML=`<LABEL>Group Label : <INPUT ondragstart="return false" draggable="false" type="text" name="form-label" id="${n}-label"/> </LABEL> <br/>\n  <LABEL>Group ID : <INPUT ondragstart="return false" draggable="false" type="text" name="id" id="${n}-id"/></LABEL> <br/>\n  <LABEL>Group Descriptor : <br/> <TEXTAREA name="description" id="${n}-description"></TEXTAREA></LABEL> <br/>\n  <BUTTON id="${n}" onclick="FormLibrary.createNewResponseElement(this)" data-link-id="${n}" >Create New Respondable Below Last Respondable</BUTTON><br/>\n  <BUTTON  onclick="FormLibrary.createNewSubgroup(this)" data-link-id="${n}">Create New Group Below Last Respondable</BUTTON><br/>\n  <BUTTON  onclick="FormLibrary.deleteContainer('${t+"-group"}' , '${n+"-group"}')">Delete Subgroup</BUTTON><br/>\n  <SPAN  class="respondable-container" id="${n}-respondables"></SPAN><BR/>\n  `,r.ondrop=u,r.ondragenter=s,r.ondragleave=c,r.ondragover=function(e){e.preventDefault()};let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,r.appendChild(l),a.appendChild(r),n}function o(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-respondables");console.log(t,a);let n="response"+(Date.now()+Math.random()),r=document.createElement("DIV");r.setAttribute("style","width:400px;min-height:200px"),r.className="creation-prompt respondable-group",r.id=n+"-fields",r.innerHTML=`Element Creation Info:<BR/>\n    <UL>\n      <LI>Item Type:\n        <SELECT id="${n}-type" ondragstart="return false" draggable="false">\n          <OPTION value="textarea">TextArea</OPTION>\n          <OPTION value="input">Input</OPTION>\n          <OPTION value="file">FileInput</OPTION>\n          <OPTION value="select">SelectGroup</OPTION>\n          <OPTION value="option">OptionGroup</OPTION>\n        </SELECT>\n      </LI>\n      <LI>If we want any of the unimplemented features, then you'll have to ask me or wait until I personally require it</LI>\n      <LI><BUTTON id="${n}" data-link-id="${n}" onclick="FormLibrary.responseTypeSelected('${t+"-respondables"}' , this)">Next</BUTTON></LI>\n      <LI><BUTTON  data-link-id="${n}" onclick="FormLibrary.deleteContainer('${t+"-respondables"}' , '${n+"-fields"}')">Delete</BUTTON></LI>\n    </UL>`,r.ondrop=u,r.ondragenter=s,r.ondragleave=c,r.ondragover=function(e){e.preventDefault()};let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,r.appendChild(l),a.appendChild(r),{base_id:n,respondable_container_id:t+"-respondables",container:r}}function d(e){e.stopPropagation(),this==e.target?(t=this.parentNode,this.parentNode.style.opacity="0.4",this.style.cursor="grabing"):e.preventDefault()}function i(e){e.stopPropagation(),this==e.target?(t=void 0,this.parentNode.style.opacity="1.0",this.style.cursor=void 0):e.preventDefault()}function s(e){console.log(this,e),this.parentNode==e.currentTarget.parentNode?(console.log(e),e.currentTarget.style.border="1px dashed red"):e.preventDefault()}function c(e){this.parentNode==e.target.parentNode?e.currentTarget.style.border="":e.preventDefault()}function u(e){if(console.log("drstart",this,e.currentTarget,e),this.parentNode!=e.currentTarget.parentNode)return void e.preventDefault();let a=this.parentNode,n=this.cloneNode(!0);a.insertBefore(n,t),function(e){let t=e.getElementsByClassName("sub-group");for(let e=0;e<t.length;e++){t[e].ondrop=u,t[e].ondragenter=s,t[e].ondragleave=c,t[e].ondragover=function(e){e.preventDefault()};let a=t[e].getElementsByClassName("drop-icon").item(0);a.ondragstart=d,a.ondragend=i,t[e].appendChild(a)}let a=e.getElementsByClassName("respondable-group");for(let e=0;e<a.length;e++){a[e].ondrop=u,a[e].ondragenter=s,a[e].ondragleave=c,a[e].ondragover=function(e){e.preventDefault()};let t=a[e].getElementsByClassName("drop-icon").item(0);t.ondragstart=d,t.ondragend=i,a[e].appendChild(t)}}(n),a.insertBefore(t,this),a.removeChild(this),console.log("Action Drop",e,this)}function m(e,t,a){let n="field"+e,r="text-area"+(Date.now()+Math.random());a.className="respondable-group",a.id=r,a.setAttribute("data-type","textarea"),a.setAttribute("style","width:400px;min-height:200px"),a.innerHTML=`TextArea Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT ondragstart="return false" draggable="false"  data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Required' id="${n}-required" type="checkbox"/><BR/>\n      </LI>\n      <LI>\n        Placeholder : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Placeholder' id="${n}-placeholder"/><BR/>\n      </LI>\n      <LI><BUTTON id="${r}" onclick="FormLibrary.deleteContainer('${t}' , '${r}')">Delete</BUTTON></LI>\n    </UL>`;let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,a.appendChild(l),n}function g(e,t,a){let n="field"+e,r="file"+(Date.now()+Math.random());a.className="respondable-group",a.id=r,a.setAttribute("data-type","fileinput"),a.setAttribute("style","width:400px;min-height:200px"),a.innerHTML=`TextArea Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT ondragstart="return false" draggable="false"  data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Required' id="${n}-required" type="checkbox"/><BR/>\n      </LI>\n      <LI>\n        Allowed Extention Pattern : <INPUT ondragstart="return false" draggable="false" data-field="1" name='AllowedExtRegex' id="${n}-allowed-ext"/><BR/>\n      </LI>\n      <LI>\n        Max Filesize(Bytes) : <INPUT ondragstart="return false" draggable="false" data-field="1" type="number" name='MaxSize' id="${n}-max-size"/><BR/>\n      </LI>\n      <LI><BUTTON id="${r}" onclick="FormLibrary.deleteContainer('${t}' , '${r}')">Delete</BUTTON></LI>\n    </UL>`;let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,a.appendChild(l),n}function p(e,t,a){let n="field"+e,r="input"+(Date.now()+Math.random());a.className="respondable-group",a.id=r,a.setAttribute("data-type","genericinput"),a.setAttribute("style","width:400px;min-height:200px"),a.innerHTML=`Input Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT ondragstart="return false" draggable="false"  data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Required' id="${n}-required" type="checkbox"/><BR/>\n      </LI>\n      <LI>\n        Placeholder : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Placeholder' id="${n}-placeholder"/><BR/>\n      </LI>\n      <LI>\n        Type : <SELECT data-field="1" name='Type' id="${n}-type" ondragstart="return false" draggable="false">\n          <OPTGROUP label="Text Types">\n            <OPTION value="text">Text</OPTION>\n            <OPTION value="email">Email</OPTION>\n            <OPTION value="number">Number</OPTION>\n            <OPTION value="password">Password</OPTION>\n            <OPTION value="url">URL</OPTION>\n          </OPTGROUP>\n          <OPTGROUP label="Time Types">\n            <OPTION value="time">Time</OPTION>\n            <OPTION value="date">Date</OPTION>\n          </OPTGROUP>\n          <OPTGROUP label="Special Types">\n            <OPTION value="color">Color Picker</OPTION>\n            <OPTION value="range">Number Range</OPTION>\n          </OPTGROUP>\n        </SELECT>\n      </LI>\n      <LI><BUTTON id="${r}" onclick="FormLibrary.deleteContainer('${t}' , '${r}')">Delete</BUTTON></LI>\n    </UL>`;let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,a.appendChild(l),n}function b(e,t,a){let n="field"+(Date.now()+Math.random()),r="select"+(Date.now()+Math.random());a.className="respondable-group",a.id=r,a.setAttribute("data-type","selectiongroup"),a.setAttribute("style","width:400px;min-height:200px"),a.innerHTML=`SelectGroup Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Required' type="checkbox" id="${n}-required"/><BR/>\n      </LI>\n      <LI>\n        Select type : <SELECT  data-field="1" name='SelectionCategory' type="checkbox" id="${n}-selectioncatergory" ondragstart="return false" draggable="false">\n          <OPTION value="checkbox">checkbox</OPTION>\n          <OPTION value="radio">radio</OPTION>\n        </SELECT><BR/>\n      </LI>\n      <LI>\n        Group Items :\n        <BUTTON id="${n}" onclick="FormLibrary.addListField(this , 'checkable')" data-link-id="${n}">+</BUTTON>\n        <BUTTON onclick="FormLibrary.removeListItem(this, 'checkable')" data-link-id="${n}">-</BUTTON><BR/>\n        <OL data-field="1" data-select="1" id="${n}-checkable">\n          <LI>\n            <INPUT ondragstart="return false" draggable="false" placeholder="Label"  data-list-item-no="0" data-field="1" name='Label' id="${n}-checkable-label-0"/>\n            <INPUT ondragstart="return false" draggable="false" placeholder="Value"  data-list-item-no="0" data-field="1" name='Value'  id="${n}-checkable-value-0"/>\n          </LI>\n        </OL>\n      </LI>\n      <LI><BUTTON id="${r}" onclick="FormLibrary.deleteContainer('${t}' , '${r}')">Delete</BUTTON></LI>\n    </UL>`;let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,a.appendChild(l),n}function f(e,t){let a=e.getAttribute("data-link-id"),n=document.getElementById(a+"-"+t),r=document.createElement("LI"),l=n.children.length;r.innerHTML=`\n    <INPUT ondragstart="return false" draggable="false" placeholder="Label" data-list-item-no="${l}" data-field="1" name='Label' id="${a}-${t}-label-${l}"/>\n    <INPUT ondragstart="return false" draggable="false" placeholder="Value" data-list-item-no="${l}" data-field="1" name='Value' id="${a}-${t}-value-${l}"/>\n  `,n.appendChild(r)}function I(e,t,a){let n="field"+(Date.now()+Math.random()),r="option"+(Date.now()+Math.random());a.className="respondable-group",a.id=r,a.setAttribute("data-type","optiongroup"),a.setAttribute("style","width:400px;min-height:200px"),a.innerHTML=`OptionGroup Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT ondragstart="return false" draggable="false" data-field="1" name='Required' type="checkbox" id="${n}-required"/><BR/>\n      </LI>\n      <LI>\n      Option Fields :\n        <BUTTON id="${n}" onclick="FormLibrary.addListField(this , 'option')" data-link-id="${n}">+</BUTTON>\n        <BUTTON onclick="FormLibrary.removeListItem(this, 'option')" data-link-id="${n}">-</BUTTON><BR/>\n        <OL data-field="1" data-select="1" id="${n}-option">\n          <LI>\n            <INPUT ondragstart="return false" draggable="false" placeholder="Label"  data-list-item-no="0" data-field="1" name='Label' id="${n}-option-label-0"/>\n            <INPUT ondragstart="return false" draggable="false" placeholder="Value"  data-list-item-no="0" data-field="1" name='Value'  id="${n}-option-value-0"/>\n          </LI>\n        </OL>\n      </LI>\n      <LI><BUTTON id="${r}" onclick="FormLibrary.deleteContainer('${t}' , '${r}')">Delete</BUTTON></LI>\n    </UL>`;let l=document.createElement("DIV");return l.setAttribute("draggable","true"),l.className="drop-icon",l.textContent=" . . . ",l.ondragstart=d,l.ondragend=i,a.appendChild(l),n}function T(e,t){let a={FormName:"",ID:"",Description:"",AnonOption:!1,FormFields:[]},n=[],r=0,l=document.getElementById("head-group").childNodes;for(let e=0;e<l.length;e++)if(l[e].nodeType==Node.ELEMENT_NODE)if(-1!=l[e].className.indexOf("form-group"))n.unshift({node:l[e],paths:[r]}),r+=1,a.FormFields.push({Label:"",ID:"",Description:"",SubGroups:[],Respondables:[]});else if("LABEL"==l[e].tagName.toUpperCase()){let t=l[e].getElementsByTagName("INPUT")[0];if(t||(t=l[e].getElementsByTagName("SELECT")[0]),t||(t=l[e].getElementsByTagName("TEXTAREA")[0]),!t)continue;switch(t.getAttribute("name")){case"form-name":a.FormName=t.value;break;case"id":a.ID=t.value;break;case"description":a.Description=t.value;break;case"anon-option":a.AnonOption=t.checked}}for(;0!=n.length;){let e=0,t=n.shift(),r=t.paths,l=r[0],o=a.FormFields[l];for(let e=1;e<r.length;e++)o=o.SubGroups[r[e]];for(let a=0;a<t.node.childNodes.length;a++){let l=t.node.childNodes[a];if(l.nodeType==Node.ELEMENT_NODE)if(-1!=l.className.indexOf("form-group")){let t=r;t.push(e),n.unshift({node:l,paths:t}),e+=1,o.SubGroups.push({Label:"",ID:"",Description:"",SubGroups:[],Respondables:[]})}else if(-1!=l.className.indexOf("respondable-container")){if(0==l.childNodes.length)continue;let e=l.childNodes,t=e.length;console.log(e,t);for(let a=0;a<t;a++){let t=e[a],n={Object:{Field:{Name:"",Label:"",Required:!1}},Type:t.getAttribute("data-type")},r=t.getElementsByTagName("INPUT"),l=t.getElementsByTagName("SELECT");if(l.length)switch(t.getAttribute("data-type")){case"selectiongroup":case"genericinput":n.Object[l[0].getAttribute("Name")]=l[0].value}for(let e=0;e<r.length;e++){let a=r[e].value;if("checkbox"==r[e].getAttribute("type")?a=r[e].checked:"number"==r[e].getAttribute("type")&&(a=parseInt(r[e].value)),"selectiongroup"==t.getAttribute("data-type"))if(r[e].getAttribute("data-list-item-no")){n.Object.CheckableItems||(n.Object.CheckableItems=[]);let t=parseInt(r[e].getAttribute("data-list-item-no"));n.Object.CheckableItems[t]||(n.Object.CheckableItems[t]={}),n.Object.CheckableItems[t][r[e].getAttribute("name")]=a}else switch(r[e].getAttribute("name")){case"Name":case"Label":case"Required":n.Object.Field[r[e].getAttribute("name")]=a;break;default:n.Object[r[e].getAttribute("name")]=a}else if("optiongroup"==t.getAttribute("data-type"))if(r[e].getAttribute("data-list-item-no")){n.Object.Options||(n.Object.Options=[]);let t=parseInt(r[e].getAttribute("data-list-item-no"));n.Object.Options[t]||(n.Object.Options[t]={}),n.Object.Options[t][r[e].getAttribute("name")]=a}else switch(r[e].getAttribute("name")){case"Name":case"Label":case"Required":n.Object.Field[r[e].getAttribute("name")]=a;break;default:n.Object[r[e].getAttribute("name")]=a}else switch(console.log(r,r[e].getAttribute("name"),a),r[e].getAttribute("name")){case"Name":case"Label":case"Required":n.Object.Field[r[e].getAttribute("name")]=a;break;default:n.Object[r[e].getAttribute("name")]=a}}o.Respondables.push(n)}}else if("LABEL"==l.tagName.toUpperCase()){let e=l.getElementsByTagName("INPUT")[0];if(e||(e=l.getElementsByTagName("SELECT")[0]),e||(e=l.getElementsByTagName("TEXTAREA")[0]),!e)continue;switch(e.getAttribute("name")){case"form-label":o.Label=e.value;break;case"id":o.ID=e.value;break;case"description":o.Description=e.value}}}}console.log(a),L(JSON.stringify(a),t)}function L(e,t){var a=new FormData;a.append("json","1"),a.append("form-construct-json",e);var n=new XMLHttpRequest;n.open("POST",t,!0),n.onload=h,n.send(a)}function h(e){let t={};try{t=JSON.parse(e.target.responseText),console.log(t,e)}catch(e){return void(document.getElementById("response-container").innerHTML=`Hard server crash<BR/><TEXTAREA>${e.toString()}</TEXTAREA>`)}if(t.error)if(t["error-list"]){let e="There are some issues preventing you from submitting...<br/><ul>";t["error-list"].forEach((t=>{e+="<li>"+t.FailPosition+" : "+t.FailType+"</li>"})),e+="</ul>",document.getElementById("response-container").innerHTML=e}else document.getElementById("response-container").innerHTML="Server error: "+t.error;else document.getElementById("response-container").innerHTML=`${t.message} - ${Date.now()}<br/>\n      ${t.URL?`URL: <a href="${t.URL}">${t.URL}</a>`:""}\n    `}Object.defineProperty(a,"__esModule",{value:!0}),a.postDeleteResponse=a.postDeleteForm=a.handleCreateComplete=a.sendCreateRequest=a.submitForm=a.responseTypeSelected=a.createOptionsGroup=a.removeListItem=a.addListField=a.createSelectGroup=a.createInputInputs=a.createFileInputs=a.createTextAreaInputs=a.deleteContainer=a.createNewResponseElement=a.createNewSubgroup=a.setFieldsAsDisabled=a.rebuildFromRaw=a.attatchCreators=a.submitUserPost=a.dropdownList=a.helloWorld=void 0,a.helloWorld=function(){console.log("hello client")},a.dropdownList=function(e,t){let a=document.getElementById("container-"+t).getElementsByClassName("item-replies").item(0);if("▶"==e.firstChild.textContent){e.firstChild.textContent="( ...Loading... )";let n=new XMLHttpRequest;n.open("GET","/mod/api/form/"+t),n.onload=function(t){let n;e.firstChild.textContent="▼";try{n=JSON.parse(t.target.responseText),console.log(n,t)}catch(e){return void(a.innerHTML=`Hard server crash<BR/><TEXTAREA>${e.toString()}</TEXTAREA>`)}var r;n.error?a.innerHTML=n.error:a.innerHTML=(r=n,`<UL class="item-ul">${(()=>{if(!r.formatted_replies)return"<LI class='item-li'>Empty Set</LI>";let e="";return r.formatted_replies.forEach((t=>{e+=`<LI class='item-li'>${t}</LI>`})),e})()}</UL>`)},n.onerror=function(){a.innerHTML="Server Issue"},n.send()}else"▼"==e.firstChild.textContent&&(e.firstChild.textContent="▶",a.innerHTML="");return!1},a.submitUserPost=function(e){let t=new FormData(e);t.append("json","1"),console.log(t);let a=new XMLHttpRequest;return a.open("POST",""+window.location),a.onload=h,a.send(t),!1},a.attatchCreators=function(e){console.log(e);let t=document.getElementById("sub-create");t.onclick=()=>l(t);let a=document.getElementById("form-submit-button");a&&(a.onclick=()=>T(0,"/mod/create"));let n=document.getElementById("form-edit-button");n&&(n.onclick=()=>T(0,"/mod/edit/"+e.form_number))},a.rebuildFromRaw=function(e){try{e=(e=(e=e.replace(/\n/g,"\\n")).replace(/\t/g,"\\t")).replace(/[\r\n\t\f\v]/g,"");let t={SubGroups:JSON.parse(e).FormFields};console.log("FC",t),n(t,document.getElementById("sub-create"))}catch(e){console.error(e),alert("Issue with rebuilding")}},a.setFieldsAsDisabled=r,a.createNewSubgroup=l,a.createNewResponseElement=o,a.deleteContainer=function(e,t){document.getElementById(e).removeChild(document.getElementById(t))},a.createTextAreaInputs=m,a.createFileInputs=g,a.createInputInputs=p,a.createSelectGroup=b,a.addListField=f,a.removeListItem=function(e,t){let a=e.getAttribute("data-link-id"),n=document.getElementById(a+"-"+t);n.childNodes.length<=1||n.removeChild(n.lastChild)},a.createOptionsGroup=I,a.responseTypeSelected=function(e,t){let a=t.getAttribute("data-link-id"),n=document.getElementById(a+"-type"),r=document.getElementById(a+"-fields");switch(console.log(a,n,r),n.value){case"textarea":m(a,e,r);break;case"input":p(a,e,r);break;case"file":g(a,e,r);break;case"select":b(0,e,r);break;case"option":I(0,e,r)}},a.submitForm=T,a.sendCreateRequest=L,a.handleCreateComplete=h,a.postDeleteForm=function(e,t){if(1==confirm("This will remove the form from the display and database.\n    Information files will retained on the server as a record until a duplicate named form is created")){let a=new XMLHttpRequest;a.open("POST",`/mod/form/delete/${e}/${t}`),a.onload=a=>{let n={};try{n=JSON.parse(a.target.responseText)}catch(e){return void alert("Error: Hard server crash")}if(n.error)alert("Error: "+n.error);else{alert("Success: "+n.message);let a=document.getElementById(`row-${e}-${t}`);a.parentNode.removeChild(a)}},a.send()}return!1},a.postDeleteResponse=function(e,t){if(1==confirm("This will remove the response and all information associated with it")){let a=new XMLHttpRequest;a.open("POST",`/mod/response/delete/${e}/${t}`),a.onload=a=>{let n={};try{n=JSON.parse(a.target.responseText)}catch(e){return void alert("Error: Hard server crash")}if(n.error)alert("Error: "+n.error);else{alert("Success: "+n.message);let a=document.getElementById(`row-${e}-${t}`);a.parentNode.removeChild(a)}},a.send()}return!1}})(),e})()));