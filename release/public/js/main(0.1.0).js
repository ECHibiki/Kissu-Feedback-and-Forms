!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("FormLibrary",[],t):"object"==typeof exports?exports.FormLibrary=t():e.FormLibrary=t()}(self,(()=>(()=>{"use strict";var e={};return(()=>{var t=e;function a(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-group");console.log(t,a);let n="group"+(Date.now()+Math.random()),l=document.createElement("DIV");l.className="subgroup form-group",l.id=n+"-group",l.setAttribute("style","border:1px solid black;"),l.innerHTML=`<LABEL>Group Label : <INPUT type="text" name="form-label" id="${n}-label"/> </LABEL> <br/>\n  <LABEL>Group ID : <INPUT type="text" name="id" id="${n}-id"/></LABEL> <br/>\n  <LABEL>Form Descriptor : <INPUT type="text" name="description" id="${n}-description"/></LABEL> <br/>\n  <BUTTON  onclick="FormLibrary.createNewResponseElement(this)" data-link-id="${n}" >Create New Respondable Below Last Respondable</BUTTON><br/>\n  <BUTTON  onclick="FormLibrary.createNewSubgroup(this)" data-link-id="${n}">Create New Group Below Last Respondable</BUTTON><br/>\n  <BUTTON  onclick="FormLibrary.deleteContainer('${t+"-group"}' , '${n+"-group"}')">Delete Subgroup</BUTTON><br/>\n  <SPAN  class="respondable-container" id="${n}-respondables"></SPAN><BR/>\n  `,a.appendChild(l)}function n(e,t,a){let n="field"+e,l="text-area"+(Date.now()+Math.random());a.className="field-container",a.id=l,a.setAttribute("data-type","textarea"),a.setAttribute("style","border:1px solid black;width:400px;min-height:200px"),a.innerHTML=`TextArea Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT   data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT  data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT  data-field="1" name='Required' id="${n}-required" type="checkbox"/><BR/>\n      </LI>\n      <LI>\n        Placeholder : <INPUT  data-field="1" name='Placeholder' id="${n}-placeholder"/><BR/>\n      </LI>\n      <LI><BUTTON onclick="FormLibrary.deleteContainer('${t}' , '${l}')">Delete</BUTTON></LI>\n    </UL>`}function l(e,t,a){let n="field"+(Date.now()+Math.random()),l="select"+(Date.now()+Math.random());a.className="field-container",a.id=l,a.setAttribute("data-type","selectiongroup"),a.setAttribute("style","border:1px solid black;width:400px;min-height:200px"),a.innerHTML=`TextArea Creation Info:<BR/>\n    <UL>\n      <LI>\n        Name : <INPUT  data-field="1" name='Name' id="${n}-name"/><BR/>\n      </LI>\n      <LI>\n        Label : <INPUT  data-field="1" name='Label' id="${n}-label"/><BR/>\n      </LI>\n      <LI>\n        Required : <INPUT  data-field="1" name='Required' type="checkbox" id="${n}-required"/><BR/>\n      </LI>\n      <LI>\n        Select type : <SELECT  data-field="1" name='SelectionCategory' type="checkbox" id="${n}-selectioncatergory">\n          <OPTION value="checkbox">checkbox</OPTION>\n          <OPTION value="radio">radio</OPTION>\n        </SELECT><BR/>\n      </LI>\n      <LI>\n        Group Items :\n        <BUTTON onclick="FormLibrary.addCheckable(this)" data-link-id="${n}">+</BUTTON>\n        <BUTTON onclick="FormLibrary.removeCheckable(this)" data-link-id="${n}">-</BUTTON><BR/>\n        <OL data-field="1" data-select="1" id="${n}-checkable">\n          <LI>\n            <INPUT placeholder="Label"  data-checkable-no="0" data-field="1" name='Label' id="${n}-checkable-label-0"/>\n            <INPUT placeholder="Value"  data-checkable-no="0" data-field="1" name='Value'  id="${n}-checkable-value-0"/>\n          </LI>\n        </OL>\n      </LI>\n      <LI><BUTTON onclick="FormLibrary.deleteContainer('${t}" , '${l}")">Delete</BUTTON></LI>\n    </UL>`}function o(e){let t={FormName:"",ID:"",Description:"",AnonOption:!1,FormFields:[]},a=[],n=0,l=document.getElementById("head-group").childNodes;for(let e=0;e<l.length;e++)if(l[e].nodeType==Node.ELEMENT_NODE)if(-1!=l[e].className.indexOf("form-group"))a.unshift({node:l[e],paths:[n]}),n+=1,t.FormFields.push({Label:"",ID:"",Description:"",SubGroup:[],Respondables:[]});else if("LABEL"==l[e].tagName.toUpperCase()){let a=l[e].getElementsByTagName("INPUT")[0];switch(a.getAttribute("name")){case"form-name":t.FormName=a.value;break;case"id":t.ID=a.value;break;case"description":t.Description=a.value;break;case"anon-option":t.AnonOption=a.checked}}for(;0!=a.length;){let e=0,n=a.shift(),l=n.paths,o=l[0],r=t.FormFields[o];for(let e=1;e<l.length;e++)r=r.SubGroup[l[e]];for(let t=0;t<n.node.childNodes.length;t++){let o=n.node.childNodes[t];if(o.nodeType==Node.ELEMENT_NODE)if(-1!=o.className.indexOf("form-group")){let t=l;t.push(e),a.unshift({node:o,paths:t}),e+=1,r.SubGroup.push({Label:"",ID:"",Description:"",SubGroup:[],Respondables:[]})}else if(-1!=o.className.indexOf("respondable-container")){if(0==o.childNodes.length)continue;let e=o.childNodes,t=e.length;console.log(e,t);for(let a=0;a<t;a++){let t=e[a],n={Object:{Field:{Name:"",Label:"",Required:!1}},Type:t.getAttribute("data-type")},l=t.getElementsByTagName("INPUT"),o=t.getElementsByTagName("SELECT");o.length&&"selectiongroup"===t.getAttribute("data-type")&&(n.Object[o[0].getAttribute("Name")]=o[0].value);for(let e=0;e<l.length;e++)if("selectiongroup"==t.getAttribute("data-type")){let t=l[e].value;if("checkbox"==l[e].getAttribute("type")&&(t=l[e].checked),l[e].getAttribute("data-checkable-no")){n.Object.CheckableItems||(n.Object.CheckableItems=[]);let a=parseInt(l[e].getAttribute("data-checkable-no"));n.Object.CheckableItems[a]||(n.Object.CheckableItems[a]={}),n.Object.CheckableItems[a][l[e].getAttribute("name")]=t}else switch(l[e].getAttribute("name")){case"Name":case"Label":case"Required":n.Object.Field[l[e].getAttribute("name")]=t;break;default:n.Object[l[e].getAttribute("name")]=t}}else if("fileinput"==t.getAttribute("data-type"));else{let t=l[e].value;switch("checkbox"==l[e].getAttribute("type")&&(t=l[e].checked),console.log(l,l[e].getAttribute("name"),t),l[e].getAttribute("name")){case"Name":case"Label":case"Required":n.Object.Field[l[e].getAttribute("name")]=t;break;default:n.Object[l[e].getAttribute("name")]=t}}r.Respondables.push(n)}}else if("LABEL"==o.tagName.toUpperCase()){let e=o.getElementsByTagName("INPUT")[0];switch(e.getAttribute("name")){case"form-label":r.Label=e.value;break;case"id":r.ID=e.value;break;case"description":r.Description=e.value}}}}console.log(t),r(JSON.stringify(t))}function r(e){var t=new FormData;t.append("json","1"),t.append("form-construct-json",e);var a=new XMLHttpRequest;a.open("POST","/mod/create",!0),a.onload=i,a.send(t)}function i(e){let t=JSON.parse(e.originalTarget.responseText);if(console.log(t,e.originalTarget.status),t.error){t["error-list"]||(document.getElementById("response-container").innerHTML="Server error: "+t.error);let e="There are some issues preventing you from submitting...<br/><ul>";t["error-list"].forEach((t=>{e+="<li>"+t.FailPosition+" : "+t.FailType+"</li>"})),e+="</ul>",document.getElementById("response-container").innerHTML=e}else document.getElementById("response-container").innerHTML=`Form was created...<br/>\n      URL: <a href="${t.URL}">${t.URL}</a>\n    `}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCreateComplete=t.sendCreateRequest=t.submitForm=t.responseTypeSelected=t.removeCheckable=t.addCheckable=t.createSelectGroup=t.createTextAreaInputs=t.deleteContainer=t.createNewResponseElement=t.createNewSubgroup=t.attatchCreators=t.helloWorld=void 0,t.helloWorld=function(){console.log("hello client")},t.attatchCreators=function(){let e=document.getElementById("sub-create");e.onclick=()=>a(e);let t=document.getElementById("form-submit-button");t.onclick=()=>o()},t.createNewSubgroup=a,t.createNewResponseElement=function(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-respondables");console.log(t,a);let n="response"+(Date.now()+Math.random()),l=document.createElement("DIV");l.className="creation-prompt",l.id=n+"-fields",l.setAttribute("style","border:1px solid black;width:400px;min-height:200px"),l.innerHTML=`Element Creation Info:<BR/>\n    <UL>\n      <LI>Item Type:\n        <SELECT id="${n}-type">\n          <OPTION value="textarea">TextArea</OPTION>\n          <OPTION value="input">Input(unimplemented)</OPTION>\n          <OPTION value="file">FileInput(unimplemented)</OPTION>\n          <OPTION value="select">SelectGroup</OPTION>\n          <OPTION value="option">OptionGroup(unimplemented)</OPTION>\n        </SELECT>\n      </LI>\n      <LI>If we want any of the unimplemented features, then you'll have to ask me or wait until I personally require it</LI>\n      <LI><BUTTON data-link-id="${n}" onclick="FormLibrary.responseTypeSelected('${t+"-respondables"}' , this)">Next</BUTTON></LI>\n      <LI><BUTTON  data-link-id="${n}" onclick="FormLibrary.deleteContainer('${t+"-respondables"}' , '${n+"-fields"}')">Delete</BUTTON></LI>\n    </UL>`,a.appendChild(l)},t.deleteContainer=function(e,t){document.getElementById(e).removeChild(document.getElementById(t))},t.createTextAreaInputs=n,t.createSelectGroup=l,t.addCheckable=function(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-checkable"),n=document.createElement("LI"),l=a.children.length;n.innerHTML=`\n    <INPUT placeholder="Label" data-checkable-no="${l}" data-field="1" name='Label' id="${t}-checkable-label-${l}"/>\n    <INPUT placeholder="Value" data-checkable-no="${l}" data-field="1" name='Value' id="${t}-checkable-name-${l}"/>\n  `,a.appendChild(n)},t.removeCheckable=function(e){let t=e.getAttribute("data-link-id"),a=document.getElementById(t+"-checkable");a.childNodes.length<=1||a.removeChild(a.lastChild)},t.responseTypeSelected=function(e,t){let a=t.getAttribute("data-link-id"),o=document.getElementById(a+"-type"),r=document.getElementById(a+"-fields");switch(console.log(a,o,r),o.value){case"textarea":n(a,e,r);break;case"select":l(0,e,r)}},t.submitForm=o,t.sendCreateRequest=r,t.handleCreateComplete=i})(),e})()));